---
title: "36-逆序对"
date: 2019-10-10T17:02:43+08:00
description: ""
draft: false
tags: ["array","sort"]
categories: ["剑指Offer"]
---



### 一、描述

在数组中的两个数字如果前面一个数字大于后面的数字，则这两个数字组成一个逆序对。

给你一个数组，求出这个数组中逆序对的总数。

概括：如果a[i] > a[j] 且 i < j， a[i] 和 a[j] 构成一个逆序对。



### 二、测试 

~~~tiki wiki
样例1

输入: A = [2, 4, 1, 3, 5]
输出: 3
解释:
(2, 1), (4, 1), (4, 3) 是逆序对
样例2

输入: A = [1, 2, 3, 4]
输出: 0
解释:没有逆序对
https://www.lintcode.com/problem/reverse-pairs/description
~~~



### 三、想法



![相邻比较](https://i.loli.net/2019/10/17/X8cu9KgRkeQxmjA.png)

![合并2个有序数组](https://i.loli.net/2019/10/17/X3GzAEaOT1MtWLg.png)

~~~

例如7,5,4,6可以划分为两段7,5  和   4,6两个子数组

1. 在7,5中求出逆序对，因为7大于5所以 有1对  total=1
2. 在6,4中求出逆序对，因为6大于4所以逆序对再加1，为2,total=2
3. 对7,5和6,4进行排序，结果为5,7,和4,6
4. 设置两个指针分别指向两个子数组中的最大值，p1指向7，p2指向6

5. 比较p1和p2指向的值，如果P1大于p2，因为p2指向的是最大值，所以第二个子数组中有几个元素就有几对逆序对(当前有两个元素，逆序对加2,2+2=4)， total=4,7>6,比较完之后将p1指向的值放入辅助数组里，辅助数组里现在有一个数字7，然后将p1向前移动一位指向5

6. 再次判断p1和p2指向的值，p1小于p2，因为p1指向的是第一个子数组中最大值，所以子数组中没有能和当前p2指向的6构成逆序对的数，将p2指向的值放入辅助数组，并向前移动一位指向4，此时辅助数组内为6,7


7. 继续判断p1(指向5)和p2(指向4)，5>4,第二个子数组中只有一个数字，逆序对加1，4+1=5，为5对，total=5
 然后将5放入辅助数组，第一个子数组遍历完毕，只剩下第二个子数组，当前只有一个4，将4也放入辅助数组，函数结束。
 
 辅助数组此时为4,5,6,7.逆序对为5
 
2个有序数组的合并逻辑

~~~





### 四、talk



### 五、code



![image.png](https://i.loli.net/2019/10/17/buoJiFKr7vDmeBg.png)





> 分享最实用的经验 ， 希望每一位来访的朋友都能有所收获！ 

### ref

- https://www.cnblogs.com/chengxiao/p/6194356.html 

  